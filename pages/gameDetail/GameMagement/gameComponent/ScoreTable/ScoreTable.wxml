<view class="score-container">
  <!-- 左侧固定列 -->
  <view class="fixed-column player-column">
    <view class="tb-header tb-header-player">球员</view>
    <scroll-view
      scroll-y
      class="table-body"
      id="playerTable"
      scroll-top="{{ scrollTop }}"
      bindscroll="onPlayerScroll"
    >
      <view class="cell-player" wx:for="{{ players }}" wx:key="user">
        <PlayerInfo
          index="{{ index }}"
          nickname="{{ item.nickname }}"
          tee="{{ item.tee }}"
          avatar="{{ item.avatar }}"
        />
      </view>
    </scroll-view>
  </view>
  <!-- 主滚动区域 -->
  <scroll-view scroll-x class="main-scroll" id="mainScroll">
    <!-- 中间内容区 -->
    <view class="scroll-content" style="width: {{ holeList.length * 80 }}px">
      <!-- 表头 -->
      <view class="tb-header tb-header-holes">
        <view wx:for="{{ holeList }}" wx:key="unique_key" class="tb-header-hole">
          <view class="hole-name">{{item.holename}}</view>
          <view class="hole-par">{{item.par}}</view>
        </view>
      </view>
      <!-- 内容行 -->
      <scroll-view
        scroll-y
        class="table-body"
        id="holesTable"
        scroll-top="{{ scrollTop }}"
        bindscroll="onHolesScroll"
      >
        <view class="table-row" wx:for="{{ players }}" wx:key="user" wx:for-index="playerIndex">
          <view
            wx:for="{{holeList}}"
            wx:key="unique_key"
            wx:for-index="holeIndex"
            class="cell-score"
          >
            <HoleCell
              playerIndex="{{ playerIndex }}"
              holeIndex="{{ holeIndex }}"
              par="{{ holeList[holeIndex].par }}"
              unique_key="{{ holeList[holeIndex].unique_key }}"
              score="{{ displayScores[playerIndex][holeIndex].score || '' }}"
              putts="{{ displayScores[playerIndex][holeIndex].putts }}"
              penalty_strokes="{{ displayScores[playerIndex][holeIndex].penalty_strokes }}"
              sand_save="{{ displayScores[playerIndex][holeIndex].sand_save }}"
              userid="{{ players[playerIndex].userid }}"
              holeid="{{ holeList[holeIndex].holeid }}"
              bind:cellclick="onCellClick"
            />
          </view>
        </view>
      </scroll-view>
    </view>
  </scroll-view>
  <!-- 右侧固定列 -->
  <view class="fixed-column total-column">
    <view class="tb-header tb-header-total">总分</view>
    <scroll-view
      scroll-y
      class="table-body"
      id="totalTable"
      scroll-top="{{ scrollTop }}"
      bindscroll="onTotalScroll"
    >
      <view class="cell-total" wx:for="{{ players }}" wx:key="user" wx:for-index="playerIdx">
        <text style="color:#333;font-size:16px;">{{displayTotals[playerIdx]}}</text>
      </view>
    </scroll-view>
  </view>
</view>
