# 捐锅功能完善说明

## 功能概述
捐锅功能允许用户为高尔夫游戏设置不同的捐锅方式，包括普通捐锅、全捐、大锅饭和不捐锅四种模式。

## 捐锅方式说明

### 1. 普通捐锅 (normal)
- **功能**: 赢家每洞捐指定分数，直到达到最大合计点数
- **必填项**: 
  - 每洞捐分 (donationPoints): 必须 > 0，不能超过100分
  - 最大合计点数 (maxDonationPoints): 必须 > 0，不能超过1000分
- **验证逻辑**: 每洞捐分不能超过最大合计点数

### 2. 全捐 (all)
- **功能**: 赢家全捐，直到达到最大合计点数
- **必填项**: 
  - 最大合计点数 (maxDonationPoints): 必须 > 0，不能超过1000分

### 3. 大锅饭 (bigpot)
- **功能**: 设置总费用，所有参与者分摊
- **必填项**: 
  - 总费用 (totalFee): 必须 > 0，不能超过10000元

### 4. 不捐锅 (none)
- **功能**: 不进行任何捐锅
- **必填项**: 无

## 输入验证规则

### 基础验证
- 所有必填项不能为空
- 所有数值必须大于0
- 输入值必须是有效数字

### 业务逻辑验证
- 每洞捐分 ≤ 最大合计点数
- 数值范围限制：
  - 每洞捐分: 1-100分
  - 最大合计点数: 1-1000分
  - 总费用: 1-10000元

### 实时验证
- 用户输入时进行实时验证
- 切换捐锅方式时自动验证相关输入值
- 无效值自动清空，提示用户重新输入

## 用户体验优化

### 视觉提示
- 必填输入框使用红色边框标识
- 必填输入框的placeholder显示"必填"
- 输入框聚焦时显示特殊样式

### 错误提示
- 详细的错误信息提示
- Toast提示显示具体的验证失败原因
- 阻止无效数据的提交

### 智能切换
- 切换捐锅方式时自动设置合理的默认值
- 自动清空不相关的输入值
- 保持用户输入的有效性

## 技术实现

### 验证方法
- `validateInputs()`: 提交时的完整验证
- `validateSingleInput()`: 单个输入值的实时验证
- `validateAfterTypeChange()`: 捐锅方式切换后的验证

### 数据绑定
- 使用MobX进行状态管理
- 响应式数据更新
- 组件生命周期管理

### 错误处理
- 完善的错误提示机制
- 优雅的降级处理
- 用户友好的错误信息

## 使用说明

1. 选择要设置捐锅的游戏配置
2. 选择捐锅方式
3. 根据选择的捐锅方式填写相应的必填项
4. 系统会实时验证输入值的有效性
5. 点击确定提交配置，系统会进行最终验证
6. 验证通过后配置生效，失败则显示具体错误信息

## 注意事项

- 所有数值输入框只接受正整数
- 捐锅配置以最后一次设置为准
- 切换捐锅方式时会自动清空不相关的输入值
- 系统会保存用户的捐锅配置，下次打开时会自动回显
