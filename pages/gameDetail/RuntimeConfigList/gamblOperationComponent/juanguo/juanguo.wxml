<view class="modal-mask" bindtap="close">
  <view class="modal-content" catchtap="noop">
    <view class="modal-title">捐锅设置(以最后一次为准)</view>
    <view class="section">
      <RuntimeConfigSelector
        wx:if="{{selectedIdList.length >= 0}}"
        runtimeConfigs="{{runtimeConfigs}}"
        selectedIdList="{{selectedIdList}}"
        title="请选择捐锅的游戏"
        bind:checkboxChange="onCheckboxChange"
        key="{{selectedIdList.join(',') + '_' + forceRefresh}}"
      />
    </view>
    <view class="section">
      <view class="section-title">请选择捐锅方式</view>
      <radio-group bindchange="onDonationTypeChange" value="{{donationType}}">
        <label class="radio-item">
          <radio value="normal" checked="{{donationType === 'normal'}}" />
          <text>赢家每洞捐</text>
          <input
            class="input-inline point-input"
            type="number"
            value="{{donationPoints}}"
            bindinput="onDonationPointsInput"
            wx:if="{{donationType === 'normal'}}"
          />
          <text wx:if="{{donationType === 'normal'}}">分,捐到</text>
          <input
            class="input-inline"
            type="number"
            value="{{maxDonationPoints}}"
            bindinput="onMaxDonationPointsInput"
            wx:if="{{donationType === 'normal'}}"
            placeholder="最大合计点数"
          />
          <text>为止</text>
        </label>
        <label class="radio-item">
          <radio value="all" checked="{{donationType === 'all'}}" />
          <text>全捐，捐到</text>
          <!-- 最大捐锅点数输入框，仅在选择全捐模式时显示 -->
          <input
            class="input-inline"
            type="number"
            value="{{maxDonationPoints}}"
            bindinput="onMaxDonationPointsInput"
            wx:if="{{donationType === 'all'}}"
            placeholder="最大合计点数"
          />
          <text>为止</text>
        </label>
        <label class="radio-item">
          <radio value="bigpot" checked="{{donationType === 'bigpot'}}" />
          <text>大锅版,共计</text>
          <input
            class="input-inline"
            type="number"
            value="{{totalFee}}"
            bindinput="onTotalFeeInput"
            wx:if="{{donationType === 'bigpot'}}"
            placeholder="请输入总费用"
          />
          <text>元</text>
        </label>
        <label class="radio-item">
          <radio value="none" checked="{{donationType === 'none'}}" />
          <text>不捐锅</text>
        </label>
      </radio-group>
    </view>

    <view class="modal-actions">
      <button class="modal-btn cancel" bindtap="close">取消</button>
      <button class="modal-btn confirm" bindtap="onConfirm">确定</button>
    </view>
  </view>
</view>
