# 规则页面重构测试指南

## 测试步骤

### 1. 系统规则配置测试
1. 进入规则页面
2. 点击"添加规则" tab
3. 点击任意游戏类型（如 8421）
4. 验证是否成功跳转到 `SysEdit` 页面
5. 验证页面标题和配置组件是否正确显示

### 2. 用户规则编辑测试
1. 进入规则页面
2. 点击"我的规则" tab
3. 点击任意规则的编辑按钮
4. 验证是否成功跳转到 `UserRuleEdit` 页面
5. 验证规则数据是否正确加载
6. 验证配置组件是否正确显示

## 问题排查

### 如果 UserRuleEdit 页面显示"加载规则失败"

**可能原因：**
1. 后端没有 `getGambleRule` API
2. 规则数据结构不匹配
3. 游戏类型映射错误

**解决方案：**
1. 检查控制台日志，查看具体的错误信息
2. 确认规则数据是否通过URL参数正确传递
3. 验证游戏类型映射是否正确

### 调试信息

在控制台中查看以下日志：
- `📋 [UserRuleEdit] 页面加载，参数:`
- `📋 [UserRuleEdit] 接收到的ruleId:`
- `📋 [UserRuleEdit] 接收到的ruleData:`
- `📋 [UserRuleEdit] 使用传递的规则数据初始化:`
- `📋 [UserRuleEdit] 映射后的游戏类型:`

## 预期结果

### 成功情况
- 页面正常加载，显示规则名称和配置组件
- 配置组件显示正确的默认值或当前配置值
- 可以正常编辑和保存规则

### 失败情况
- 页面显示错误提示
- 配置组件无法正确显示
- 保存功能异常

## 修复记录

### 2024-01-XX
- 修复了 UserRuleEdit 页面加载规则失败的问题
- 添加了规则数据通过URL参数传递的机制
- 改进了游戏类型映射逻辑
- 添加了详细的调试日志 