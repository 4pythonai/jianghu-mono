<!-- 我的规则组件 -->
<view wx:if="{{ show }}" class="myrules-container">
  <!-- 加载状态 -->
  <view wx:if="{{ loading }}" class="loading-container">
    <text class="loading-text">加载中...</text>
  </view>
  <!-- 规则内容 -->

  <view wx:else class="rules-content">
    <view wx:if="{{ total.overall === 0 }}" class="empty-state">
      <text class="empty-text">暂无规则</text>
      <text class="empty-hint">点击"添加规则"创建您的第一条规则</text>
    </view>
    <!-- 分组规则列表 -->
    <view wx:else class="rules-groups">
      <!-- 4人游戏规则 -->
      <view wx:if="{{ total.fourPlayers > 0 }}" class="rules-group">
        <view class="group-header">
          <text class="group-title">4人游戏</text>
        </view>
        <view class="group-list">
          <!-- 调试信息 -->
          <view
            wx:for="{{ myRules.fourPlayers }}"
            wx:key="id"
            style="background: #f0f0f0; padding: 10rpx; margin: 5rpx; font-size: 24rpx;"
          >
            <text>调试: {{ item.gambleUserName || item.user_rulename }} - gambleSysName: {{ item.gambleSysName }}</text>
          </view>

          <!-- 类似 React 的 map 循环渲染 -->
          <block wx:for="{{ myRules.fourPlayers }}" wx:key="id">
            <!-- 根据 gambleSysName 动态选择组件 -->
            <Rule4P8421
              wx:if="{{ item.gambleSysName === '4p-8421' }}"
              class="group-list-item"
              item="{{ item }}"
              bind:editRule="onEditRule"
              bind:viewRule="onViewRule"
              bind:longPressRule="onLongPressRule"
              showEdit="{{true}}"
            />
            <Rule4PLasi
              wx:elif="{{ item.gambleSysName === '4p-lasi' }}"
              class="group-list-item"
              item="{{ item }}"
              bind:editRule="onEditRule"
              bind:viewRule="onViewRule"
              bind:longPressRule="onLongPressRule"
              showEdit="{{true}}"
            />
            <!-- 如果没有匹配的组件，显示默认信息 -->
            <view
              wx:else
              style="background: #ffebee; padding: 20rpx; margin: 10rpx; border-radius: 8rpx;"
            >
              <text style="color: #d32f2f;">未匹配的规则类型: {{ item.gambleSysName }}</text>
              <text
                style="display: block; margin-top: 10rpx;"
              >规则名称: {{ item.gambleUserName || item.user_rulename }}</text>
            </view>
          </block>
        </view>
      </view>
    </view>
  </view>
</view>
