<!-- 赌球结果页面 -->
<view class="result-container">
    <!-- 配置信息区域 -->
    <view class="config-section">
        <view class="config-header">
            <text class="config-title">游戏配置</text>
        </view>
        <view class="config-details">
            <view class="config-item">
                <text class="label">规则类型:</text>
                <text class="value">{{ ruleType || '未知规则' }}</text>
            </view>
            <view class="config-item" wx:if="{{ userRuleName }}">
                <text class="label">自定义规则:</text>
                <text class="value">{{ userRuleName }}</text>
            </view>
            <view class="config-item">
                <text class="label">洞数范围:</text>
                <text class="value">第{{ firstHole }}洞 - 第{{ lastHole }}洞</text>
            </view>
            <view class="config-item">
                <text class="label">参与人数:</text>
                <text class="value">{{ playerCount }}人</text>
            </view>
        </view>
    </view>

    <!-- 加载状态 -->
    <view wx:if="{{ loading }}" class="loading-section">
        <view class="loading-spinner"></view>
        <text class="loading-text">正在加载结果...</text>
    </view>

    <!-- 错误状态 -->
    <view wx:elif="{{ error }}" class="error-section">
        <text class="error-text">{{ error }}</text>
        <button class="retry-button" bindtap="retryLoad">重试</button>
    </view>

    <!-- 结果内容 -->
    <view wx:elif="{{ resultData }}" class="result-section">
        <!-- 结果汇总 -->
        <view class="summary-section">
            <view class="summary-header">
                <text class="summary-title">比赛结果</text>
                <text class="update-time">{{ resultData.updateTime }}</text>
            </view>
            <view class="summary-stats">
                <view class="stat-item">
                    <text class="stat-label">总奖金池</text>
                    <text class="stat-value">{{ resultData.totalAmount }}元</text>
                </view>
                <view class="stat-item">
                    <text class="stat-label">状态</text>
                    <text class="stat-value {{ resultData.gameStatus === 'completed' ? 'status-completed' : 'status-ongoing' }}">
                        {{ resultData.gameStatus === 'completed' ? '已完成' : '进行中' }}
                    </text>
                </view>
            </view>
        </view>

        <!-- 排名列表 -->
        <view class="ranking-section">
            <view class="ranking-header">
                <text class="ranking-title">排名结果</text>
            </view>
            <view class="ranking-list">
                <view wx:for="{{ resultData.results }}" wx:key="playerId" class="ranking-item {{ item.ranking === 1 ? 'winner' : '' }}">
                    <view class="ranking-info">
                        <view class="rank-badge rank-{{ item.ranking }}">{{ item.ranking }}</view>
                        <view class="player-info">
                            <text class="player-name">{{ item.playerName }}</text>
                            <text class="player-score">{{ item.score }}杆</text>
                        </view>
                    </view>
                    <view class="win-amount {{ item.winAmount > 0 ? 'positive' : item.winAmount < 0 ? 'negative' : 'neutral' }}">
                        <text class="amount-text">
                            {{ item.winAmount > 0 ? '+' : '' }}{{ item.winAmount }}元
                        </text>
                    </view>
                </view>
            </view>
        </view>
    </view>

    <!-- 操作按钮区域 -->
    <view class="action-section">
        <button class="action-button secondary" bindtap="onBackToGame">
            <text class="button-text">返回比赛</text>
        </button>
        <button class="action-button primary" bindtap="onShareResult">
            <text class="button-text">分享结果</text>
        </button>
    </view>
</view> 