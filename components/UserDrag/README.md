# UserDrag ç»„ä»¶

åŸºäº HolesDrag ç»„ä»¶æ”¹é€ çš„ç”¨æˆ·æ‹–æ‹½æ’åºç»„ä»¶ï¼Œæ”¯æŒå•åˆ—å¸ƒå±€çš„ç”¨æˆ·åˆ—è¡¨æ‹–æ‹½æ’åºåŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **æ‹–æ‹½æ’åº**: æ”¯æŒç”¨æˆ·é¡¹ç›®çš„æ‹–æ‹½é‡æ–°æ’åº
- **åˆ†ç»„æ˜¾ç¤º**: æ ¹æ® `redBlueConfig` é…ç½®æ˜¾ç¤ºåˆ†ç»„é¢œè‰²æ ‡è¯†
- **å“åº”å¼å¸ƒå±€**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **å•åˆ—å¸ƒå±€**: ä¸“é—¨é’ˆå¯¹ç”¨æˆ·åˆ—è¡¨çš„1åˆ—å¸ƒå±€è®¾è®¡

## ä½¿ç”¨æ–¹æ³•

### 1. åœ¨é¡µé¢ JSON ä¸­å¼•å…¥ç»„ä»¶

```json
{
  "usingComponents": {
    "UserDrag": "/components/UserDrag/UserDrag"
  }
}
```

### 2. åœ¨ WXML ä¸­ä½¿ç”¨

```xml
<UserDrag
  user-list="{{userList}}"
  red-blue-config="{{redBlueConfig}}"
  bind:sortend="onUserSortEnd"
/>
```

### 3. åœ¨ JS ä¸­å¤„ç†æ•°æ®

```javascript
Page({
  data: {
    userList: [
      {
        userid: 1,
        nickname: "ç”¨æˆ·1",
        avatar: "/images/avatar1.png"
      },
      // ... æ›´å¤šç”¨æˆ·
    ],
    redBlueConfig: '4_å›ºæ‹‰' // æˆ– '4_ä¹±æ‹‰', '4_é«˜æ‰‹ä¸è§é¢'
  },

  // æ‹–æ‹½æ’åºå®Œæˆå›è°ƒ
  onUserSortEnd(e) {
    const newUserList = e.detail.listData;
    this.setData({
      userList: newUserList
    });
    // å¤„ç†æ’åºåçš„ç”¨æˆ·åˆ—è¡¨
  }
})
```

## å±æ€§è¯´æ˜

| å±æ€§å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| userList | Array | [] | ç”¨æˆ·åˆ—è¡¨æ•°æ® |
| redBlueConfig | String | '4_å›ºæ‹‰' | åˆ†ç»„é…ç½®ï¼ˆ'4_å›ºæ‹‰', '4_ä¹±æ‹‰', '4_é«˜æ‰‹ä¸è§é¢'ï¼‰ |
| scrollTop | Number | 0 | å¤–éƒ¨ä¼ å…¥çš„æ»šåŠ¨ä½ç½® |
| isModal | Boolean | false | æ˜¯å¦åœ¨å¼¹æ¡†ä¸­ä½¿ç”¨ |

## äº‹ä»¶è¯´æ˜

| äº‹ä»¶å | è¯´æ˜ | è¿”å›å‚æ•° |
|--------|------|----------|
| sortend | æ‹–æ‹½æ’åºå®Œæˆ | {listData: Array} - æ’åºåçš„ç”¨æˆ·åˆ—è¡¨ |
| scroll | æ»šåŠ¨äº‹ä»¶ | {scrollTop: Number} - æ»šåŠ¨ä½ç½® |

## ç”¨æˆ·æ•°æ®ç»“æ„

```javascript
{
  userid: Number,      // ç”¨æˆ·ID
  nickname: String,    // ç”¨æˆ·æ˜µç§°
  wx_nickname: String, // å¾®ä¿¡æ˜µç§°ï¼ˆå¤‡ç”¨ï¼‰
  avatar: String,      // å¤´åƒURL
  handicap: Number     // å·®ç‚¹ï¼ˆå¯é€‰ï¼‰
}
```

## åˆ†ç»„é…ç½®è¯´æ˜

- **ç»Ÿä¸€åˆ†ç»„é€»è¾‘**: 1ã€2åï¼ˆindex 0ã€1ï¼‰æ˜¾ç¤ºè“è‰²ğŸ”µï¼Œ3ã€4åï¼ˆindex 2ã€3ï¼‰æ˜¾ç¤ºçº¢è‰²ğŸ”´
- åˆ†ç»„é¢œè‰²åŸºäºæ•°ç»„ä½ç½®ï¼ˆåæ¬¡ï¼‰ï¼Œä¸å…·ä½“çš„åˆ†ç»„é…ç½®æ— å…³
- æ•°ç»„ä½ç½®å³ä»£è¡¨åæ¬¡ï¼šindex+1 = åæ¬¡

## æ–¹æ³•è¯´æ˜

| æ–¹æ³•å | è¯´æ˜ | å‚æ•° | è¿”å›å€¼ |
|--------|------|------|-------|
| getListData() | è·å–å½“å‰ç”¨æˆ·åˆ—è¡¨ | æ—  | Array |
| setListData(data) | è®¾ç½®ç”¨æˆ·åˆ—è¡¨ | data: Array | æ—  |
| updateUserList(newUserList) | æ›´æ–°ç”¨æˆ·åˆ—è¡¨ | newUserList: Array | æ—  |

## ç»„ä»¶ç»“æ„

```
UserDrag/
â”œâ”€â”€ UserDrag.js          # ä¸»ç»„ä»¶é€»è¾‘
â”œâ”€â”€ UserDrag.wxml        # ä¸»ç»„ä»¶æ¨¡æ¿
â”œâ”€â”€ UserDrag.wxss        # ä¸»ç»„ä»¶æ ·å¼
â”œâ”€â”€ UserDrag.json        # ä¸»ç»„ä»¶é…ç½®
â”œâ”€â”€ dragComponent/       # æ‹–æ‹½æ ¸å¿ƒç»„ä»¶ï¼ˆä»HolesDragå¤åˆ¶ï¼‰
â””â”€â”€ userItem/            # ç”¨æˆ·é¡¹ç›®å­ç»„ä»¶
    â”œâ”€â”€ index.js         # ç”¨æˆ·é¡¹ç›®é€»è¾‘
    â”œâ”€â”€ index.wxml       # ç”¨æˆ·é¡¹ç›®æ¨¡æ¿
    â”œâ”€â”€ index.wxss       # ç”¨æˆ·é¡¹ç›®æ ·å¼
    â””â”€â”€ index.json       # ç”¨æˆ·é¡¹ç›®é…ç½®
```

## æ³¨æ„äº‹é¡¹

1. ç»„ä»¶åŸºäº HolesDrag çš„æ‹–æ‹½æ ¸å¿ƒé€»è¾‘ï¼Œç»§æ‰¿äº†å…¶ç¨³å®šæ€§å’Œæ€§èƒ½ä¼˜åŠ¿
2. ä½¿ç”¨1åˆ—å¸ƒå±€ï¼Œä¸“é—¨ä¼˜åŒ–ç”¨æˆ·åˆ—è¡¨çš„æ˜¾ç¤ºå’Œæ“ä½œ
3. æ”¯æŒå“åº”å¼å¸ƒå±€ï¼Œåœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ
4. æ‹–æ‹½æ“ä½œæ”¯æŒæŒ¯åŠ¨åé¦ˆï¼ˆåœ¨çœŸæœºä¸Šï¼‰