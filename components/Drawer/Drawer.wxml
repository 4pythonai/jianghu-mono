<view data-status="open" bindtap="handleShowTecModelClick"></view>
<view class="mask" data-status="close" wx:if="{{model}}" bindtap="handleCancelTecClick"></view>
<view animation="{{animationData}}" class="drawer-box" wx:if="{{model}}">
  <view class="drawer-content">
    <!-- 标题栏 -->
    <view class="drawer-header">
      <text class="drawer-title">游戏数据</text>
      <view class="close-btn" bindtap="handleCancelTecClick">
        <text class="close-icon">×</text>
      </view>
    </view>

    <!-- 标题列表 -->
    <view class="title-list">
      <!-- 汇总标题 -->
      <view
        class="title-item {{currentDisplayType === 'summary' ? 'active' : ''}}"
        bindtap="switchDisplay"
        data-type="summary"
        data-index="-1"
      >
        <text class="title-text">游戏汇总</text>
      </view>

      <!-- 明细标题列表 -->
      <view
        class="title-item {{currentDisplayType === 'detail' && currentDetailIndex === index ? 'active' : ''}}"
        wx:for="{{gambleResults}}"
        wx:key="index"
        bindtap="switchDisplay"
        data-type="detail"
        data-index="{{index}}"
      >
        <text class="title-text">赌博配置 {{item.gambleSysName}}/{{item.gambleUserName}}</text>
      </view>
    </view>

    <!-- 内容区域 -->
    <view class="content-area">
      <!-- 汇总表格 -->
      <view class="table-container" wx:if="{{currentDisplayType === 'summary'}}">
        <GambleTotalTable
          groupInfo="{{summaryResult.group_info}}"
          usefulHoles="{{summaryResult.useful_holes}}"
          qrcode_url="{{''}}"
          showQr="{{false}}"
        ></GambleTotalTable>
      </view>

      <!-- 明细表格 -->
      <view
        class="table-container"
        wx:if="{{currentDisplayType === 'detail' && currentDetailIndex >= 0}}"
      >
        <GambleResultTable
          groupInfo="{{gambleResults[currentDetailIndex].group_info}}"
          usefulHoles="{{gambleResults[currentDetailIndex].useful_holes}}"
          qrcode_url="{{gambleResults[currentDetailIndex].qrcode_url}}"
          showQr="{{false}}"
        ></GambleResultTable>
      </view>
    </view>
  </view>
</view>
