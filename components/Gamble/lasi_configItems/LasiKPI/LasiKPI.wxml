<view class="config-section">
  <!-- 标题栏 -->
  <view class="section-header" bindtap="onToggleDetail">
    <view class="header-left">
      <text class="section-title">拉丝配置</text>
    </view>
    <view class="header-right">
      <text class="current-value">{{generatedRuleName}}</text>
      <view class="arrow arrow-down">▼</view>
    </view>
  </view>

  <!-- 详细配置区域 -->
  <view class="config-content show">
    <!-- 主要内容区域 -->
    <view class="main-content">
      <!-- 左侧KPI选项列表 -->
      <view class="kpi-options">
        <!-- 较好成绩PK -->
        <view
          class="kpi-item {{isSelected.best ? 'selected' : ''}}"
          bindtap="onSelectIndicator"
          data-value="best"
        >
          <!-- 占位元素，保持对齐 -->
          <view class="toggle-placeholder"></view>
          <view class="checkbox {{isSelected.best ? 'checked' : ''}}">
            <text wx:if="{{isSelected.best}}" class="check-icon">✓</text>
          </view>
          <text class="kpi-label">较好成绩PK</text>
          <view class="kpi-value">{{kpiValues.best}} 分</view>
        </view>

        <!-- 较差成绩PK -->
        <view
          class="kpi-item {{isSelected.worst ? 'selected' : ''}}"
          bindtap="onSelectIndicator"
          data-value="worst"
        >
          <!-- 占位元素，保持对齐 -->
          <view class="toggle-placeholder"></view>
          <view class="checkbox {{isSelected.worst ? 'checked' : ''}}">
            <text wx:if="{{isSelected.worst}}" class="check-icon">✓</text>
          </view>
          <text class="kpi-label">较差成绩PK</text>
          <view class="kpi-value">{{kpiValues.worst}} 分</view>
        </view>

        <!-- 双方总杆PK -->
        <view
          class="kpi-item {{isSelected.total ? 'selected' : ''}}"
          bindtap="onSelectIndicator"
          data-value="total"
        >
          <!-- 切换按钮 -->
          <view class="toggle-btn" catchtap="onToggleTotalType">
            <image class="toggle-icon" src="/assets/icons/icons8-loop-50.png" mode="aspectFit"></image>
          </view>
          <view class="checkbox {{isSelected.total ? 'checked' : ''}}">
            <text wx:if="{{isSelected.total}}" class="check-icon">✓</text>
          </view>
          <text class="kpi-label">{{totalCalculationType === 'add_total' ? '加法总杆PK' : '乘法总杆PK'}}</text>
          <view class="kpi-value">{{kpiValues.total}} 分</view>
        </view>
      </view>

      <!-- 右侧总分显示 -->
      <view class="total-score">
        <text class="total-number">{{totalScore}}</text>
        <text class="total-unit">分</text>
      </view>
    </view>

    <!-- 说明文字 -->
    <view class="explanation">
      <text class="explanation-title">💡 拉丝配置说明</text>
      <text class="explanation-text">
        拉丝是指从多个玩家中"拉"出特定的指标来进行比较。选择合适的指标可以让比赛更加公平有趣。
        系统会根据您的选择自动生成规则名称。
      </text>
    </view>
  </view>
</view>
