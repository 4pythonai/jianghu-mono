<view class="config-section">
  <!-- 标题栏 -->
  <view class="section-header" bindtap="onToggleDetail">
    <view class="header-left">
      <text class="section-title">拉丝配置</text>
      <text class="section-subtitle">选择要比较的指标</text>
    </view>
    <view class="header-right">
      <text class="current-value">{{generatedRuleName}}</text>
      <view class="arrow {{showDetail ? 'arrow-up' : 'arrow-down'}}">▼</view>
    </view>
  </view>

  <!-- 详细配置区域 -->
  <view class="config-content {{showDetail ? 'show' : 'hide'}}">
    <!-- 指标选择列表 -->
    <view class="options-list">
      <view
        wx:for="{{indicatorOptions}}"
        wx:key="value"
        class="option-item {{selectedIndicators.includes(item.value) ? 'selected' : ''}}"
        bindtap="onSelectIndicator"
        data-value="{{item.value}}"
      >
        <view class="option-left">
          <view class="checkbox {{selectedIndicators.includes(item.value) ? 'checked' : ''}}">
            <view wx:if="{{selectedIndicators.includes(item.value)}}" class="check-icon">✓</view>
          </view>
          <view class="option-text">
            <text class="option-label">{{item.label}}</text>
            <text class="option-desc">{{item.desc}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 总杆计算方式切换 -->
    <view
      class="calculation-toggle"
      wx:if="{{selectedIndicators.includes('sum') || selectedIndicators.includes('product')}}"
    >
      <text class="toggle-label">总杆计算方式</text>
      <view class="toggle-container" bindtap="onToggleCalculation">
        <view class="toggle-option {{totalCalculation === 'sum' ? 'active' : ''}}">总杆和</view>
        <view class="toggle-option {{totalCalculation === 'product' ? 'active' : ''}}">总杆乘积</view>
      </view>
    </view>

    <!-- 说明文字 -->
    <view class="explanation">
      <text class="explanation-title">💡 拉丝配置说明</text>
      <text class="explanation-text">
        拉丝是指从多个玩家中"拉"出特定的指标来进行比较。选择合适的指标可以让比赛更加公平有趣。
        系统会根据您的选择自动生成规则名称。
      </text>
    </view>
  </view>
</view>
