# 队际赛创建

## 名词解释
| 术语 | 说明 |
| --- | --- |
| 球局 | 普通创建或快速创建的普通球局，可以是一组或多组人，不带球队ID |
| 赛事 | 专指球队比赛，带有球队ID的球局 |
| 队内赛 | 在一个球队ID下的赛事，"分队设置"是临时分成的小分队 |
| 队际赛 | 在两个或多个球队ID下的赛事，各球队即为分队 |
| 组（Group） | **物理概念**，一个Tee Time一起打球的人，通常2-4人 |
| 旺波 | 即 OneBall 的音译，中文标准翻译是"最佳球位"或"四人四球最佳球位" |

---

## 队际赛 vs 队内赛 主要区别

| 对比项 | 队内赛 | 队际赛 |
| --- | --- | --- |
| 球队数量 | 1个球队 | 2个或多个球队 |
| 分队设置 | 创建者手工添加临时分队 | 无需设置，各球队即为分队 |
| 球队名称 | 显示球队全称 | 可设置"球队简称"覆盖显示 |
| 比洞赛限制 | 仅限两个分队 | 仅限两个球队（超过两支球队时不可选） |

---

## 赛制说明

### 大类划分
+ **比杆赛**：按总杆数计算胜负，支持多个球队同时比赛
+ **比洞赛**：按每洞胜负计算，赢洞多者获胜，**仅限两个球队对抗**

### 具体赛制
| 赛制 | 球队要求 | 分组规则 | 记分方式 |
| --- | --- | --- | --- |
| 个人比杆赛 | ≥2个球队 | 随意安排 | 个人成绩 |
| 四人四球最好成绩比杆赛 | ≥2个球队 | 随意安排 | 团队成绩 |
| 四人四球最佳球位比杆赛（旺波比杆） | ≥2个球队 | 随意安排 | 团队成绩 |
| 四人两球比杆赛 | ≥2个球队 | 每组必须4人 | 团队成绩 |
| 个人比洞赛 | 仅限2个球队 | 每组2人，须来自不同球队 | 个人成绩 |
| 四人四球最好成绩比洞赛 | 仅限2个球队 | 每组须含两个球队成员 | 团队成绩 |
| 四人四球最佳球位比洞赛（旺波比洞） | 仅限2个球队 | 每组须含两个球队成员 | 团队成绩 |
| 四人两球比洞赛 | 仅限2个球队 | 每组必须4人，须含两个球队成员 | 团队成绩 |

### 分组规则说明
+ **比杆赛**：分组可随意安排，由比赛组织者确认合理性，系统不做校验
+ **比洞赛**：每组必须包含来自两个不同球队的球员，**系统需校验**

---

## 创建队际赛

### 创建入口
任何人都可以创建队际赛（无需是参赛球队的管理员）

### 创建字段
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| 参赛球队 | 多选 | 选择2个或多个球队 |
| 比赛名称 | 文本输入 | 自定义比赛名称 |
| 比赛场地 | 选择 | 选择球场 |
| 比赛时间 | 日期时间 | 开球时间 |
| 参赛费用 | 数字输入 | 仅展示信息，不涉及支付 |
| 比赛赛制 | 选择 | 8种赛制选一（超过2个球队时，比洞赛不可选） |
| 奖项设置 | 文本输入 | 纯文本描述 |
| 分组权限 | 单选 | 管理员分组 / 球员自由选择分组 |
| 球队简称设置 | 配置 | 可选，为各球队设置在本赛事中显示的简称 |
| 取前N名成绩 | 数字输入 | 团队赛制时，每个球队取前N名成绩汇总 |
| 是否公开 | Radio | Public:任意人可报名 / Private:只限球队成员报名，缺省为Public |

### 球队简称设置
允许创建者将"球队全称"在本赛事里显示为"球队简称"。

#### 设置时机
在替球队报名过程中，系统弹出确认提示框：
```
┌─────────────────────────────────┐
│  确认此球队参赛                    │
├─────────────────────────────────┤
│  球队全称：北京高尔夫俱乐部精英队     │
│                                 │
│  球队简称：[北京高尔夫俱乐部精英队]   │
│           （文本输入框，默认=全称）   │
│                                 │
│      [取消]        [确认]        │
└─────────────────────────────────┘
```

#### 后续修改
赛事创建完成后，在**报名界面**右侧浮窗按钮集合中，提供**"球队管理"**按钮，可修改球队简称。
> 注：此部分UI暂未设计

示例：
| 球队全称 | 本赛事简称 |
| --- | --- |
| 北京高尔夫俱乐部精英队 | 北京队 |
| 上海东方高尔夫联盟 | 上海队 |

---

## 报名规则

### 报名方式
1. **分享报名**：将报名页面分享到微信群，球员自行报名
2. **替好友报名**：任意人员可通过"替好友报名"按钮为他人报名

### "替好友报名"选项
点击"替好友报名"按钮后，提供三个选项：
1. **从球队中选择** - 从参赛球队的成员列表中选择
2. **从好友通讯录选择** - 从自己的好友关系中选择
3. **手工添加** - 手工输入球员信息

### 球队归属规则
+ **非球队成员可以报名**，且可自由选择代表任何一支参赛球队
+ **唯一性校验**：一个球员ID只能在一个球队中报名
  - 如果已在A队报名成功，再次报名（无论何种方式）时：
  - 系统应显示错误提示，阻止本次报名
  - 提示用户需先取消原有报名，才能重新报名到其他球队

### 报名错误提示示例
```
该球员已在 [A队名称] 报名，如需更换球队，请先取消原报名。
```

---

## 分组规则

### 分组权限
创建赛事时选择，两种方式：
1. **管理员分组**：由管理员/创建者指定球员分配到各组
2. **球员自由选择分组**：球员报名后自己选择加入哪个组

### 分组校验规则
| 赛制类型 | 系统校验 | 说明 |
| --- | --- | --- |
| 比杆赛 | 不校验 | 随意分配，由组织者确认合理性 |
| 比洞赛 | **需校验** | 每组必须包含来自两个不同球队的球员 |

### 比洞赛分组校验错误提示示例
```
比洞赛要求每组必须包含两个不同球队的球员，请调整分组。
```

---

## 成绩统计

### 成绩归属
+ 团队成绩按球员所属球队（分队）归属汇总
+ 各球员报名时选择的球队，即为其成绩归属的球队

### 取前N名成绩
+ 队际赛支持"取前N名成绩"选项
+ 指每个球队各自取前N名成绩进行汇总
+ 不涉及跨球队的统计
+ **默认值**：如果创建时未输入N值，系统以**最少参赛人数球队的人数**作为默认N值
  - 示例：A队报名10人，B队报名8人，C队报名12人 → 默认N=8

### 成绩展示
各球队的汇总成绩展示见UI设计图

---

## 赛事状态流转
与队内赛一致，不需要其他球队管理员确认：

```
创建 → 报名中 → 报名截止 → 进行中 → 已结束
                 ↓
               已取消
```

| 状态 | 说明 |
| --- | --- |
| 报名中 | 球员可报名参赛 |
| 报名截止 | 停止报名，管理员进行分组 |
| 进行中 | 比赛开始，可以记分 |
| 已结束 | 比赛完成，展示最终结果 |
| 已取消 | 比赛取消 |

---

## 比洞赛结果展示
与队内赛一致，使用专业格式展示：

**比赛进行中（胜负未分）：**
| 格式 | 含义 |
| --- | --- |
| XUP | 计分卡**上方**一方领先X洞 |
| XDN | 计分卡**下方**一方领先X洞 |
| AS | All Square，当前平局 |

**比赛结束（胜负已分）：**
| 格式 | 含义 | 示例 |
| --- | --- | --- |
| X&Y | 领先X洞，剩余Y洞时提前锁定胜局 | "3&2" 表示领先3洞，还剩2洞时比赛结束 |
| XUP | 打完全部洞后，计分卡上方一方领先X洞获胜 | "1UP" 表示上方领先1洞 |
| XDN | 打完全部洞后，计分卡下方一方领先X洞获胜 | "1DN" 表示下方领先1洞 |
| AS | All Square，打完全部洞后平局 | - |

---

## UI设计

### 创建队际赛
当选择的球队超过两支，则不支持所有类型的比洞赛（比洞赛赛制变灰不可选）。

<!-- 这是一张图片，ocr 内容为： -->
![](https://cdn.nlark.com/yuque/0/2025/png/57505772/1750918810918-4f37cb00-8e48-4215-8453-f4c79dbfe3f5.png)

<!-- 这是一张图片，ocr 内容为： -->
![](https://cdn.nlark.com/yuque/0/2025/png/57505772/1750918841825-406a597c-ba99-46cb-82cf-a4055b4b5177.png)

<!-- 这是一张图片，ocr 内容为： -->
![](https://cdn.nlark.com/yuque/0/2025/png/57505772/1750918858219-55439372-0793-45e7-9dea-3f027237919e.png)
