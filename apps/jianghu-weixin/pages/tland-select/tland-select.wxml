<wxs src="/utils/image.wxs" module="image" />
<CustomNavBar title="Tå°åˆ†é…" />
<view class="page-container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-content">
      <view class="title">Tå°åˆ†é…</view>
      <view class="subtitle">ä¸ºæ¯ä½çƒå‘˜é€‰æ‹©åˆé€‚çš„Tå°é¢œè‰²</view>
    </view>
  </view>

  <!-- ç©å®¶åˆ—è¡¨ -->
  <view class="players-container">
    <view wx:if="{{ players.length === 0 }}" class="empty-state">
      <view class="empty-icon">ğŸŒï¸</view>
      <view class="empty-text">æš‚æ— çƒå‘˜æ•°æ®</view>
      <view class="empty-sub">è¯·å…ˆè¿”å›æ·»åŠ çƒå‘˜</view>
    </view>

    <view wx:else class="players-list">
      <view class="player-item" wx:for="{{ players }}" wx:key="userid">
        <!-- ç©å®¶ä¿¡æ¯ -->
        <view class="player-info">
          <view class="player-avatar">
            <image
              src="{{ image.imageUrl(item.avatar) || '/images/default-avatar.png' }}"
              mode="aspectFill"
              class="avatar-image"
            ></image>
          </view>
          <view class="player-details">
            <view class="player-name">{{ item.wx_nickname || item.nickname }}</view>
            <view class="player-meta">ç¬¬{{ item.groupIndex + 1 }}ç»„ Â· ç©å®¶{{ item.playerIndex + 1 }}</view>
          </view>
        </view>

        <!-- Tå°é€‰æ‹©å™¨ -->
        <view class="tee-selector">
          <view class="tee-options">
            <view
              class="tee-option {{ item.tee === 'black' ? 'selected' : '' }}"
              data-player-index="{{ index }}"
              data-tee="black"
              bindtap="onTeeSelect"
            >
              <view class="tee-color tee-black"></view>
              <text class="tee-label">é»‘T</text>
            </view>

            <view
              class="tee-option {{ item.tee === 'blue' ? 'selected' : '' }}"
              data-player-index="{{ index }}"
              data-tee="blue"
              bindtap="onTeeSelect"
            >
              <view class="tee-color tee-blue"></view>
              <text class="tee-label">è“T</text>
            </view>

            <view
              class="tee-option {{ item.tee === 'white' ? 'selected' : '' }}"
              data-player-index="{{ index }}"
              data-tee="white"
              bindtap="onTeeSelect"
            >
              <view class="tee-color tee-white"></view>
              <text class="tee-label">ç™½T</text>
            </view>

            <view
              class="tee-option {{ item.tee === 'gold' ? 'selected' : '' }}"
              data-player-index="{{ index }}"
              data-tee="gold"
              bindtap="onTeeSelect"
            >
              <view class="tee-color tee-gold"></view>
              <text class="tee-label">é‡‘T</text>
            </view>

            <view
              class="tee-option {{ item.tee === 'red' ? 'selected' : '' }}"
              data-player-index="{{ index }}"
              data-tee="red"
              bindtap="onTeeSelect"
            >
              <view class="tee-color tee-red"></view>
              <text class="tee-label">çº¢T</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œåŒº -->
  <view class="bottom-actions">
    <view class="action-summary">
      <text class="summary-text">å·²è®¾ç½® {{ players.length }} ä½çƒå‘˜çš„Tå°</text>
    </view>
    <view class="action-buttons">
      <button class="btn btn-cancel" bindtap="onCancel">å–æ¶ˆ</button>
      <button class="btn btn-confirm" bindtap="onConfirm">ç¡®å®š</button>
    </view>
  </view>
</view>
