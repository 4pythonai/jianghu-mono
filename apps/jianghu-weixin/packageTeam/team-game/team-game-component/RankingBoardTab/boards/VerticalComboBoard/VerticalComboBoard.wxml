<view class="board">
  <view class="board-header">
    <view class="col col-rank">排名</view>
    <view class="col col-combo">组合</view>
    <view class="col col-score">成绩</view>
    <view class="col col-thru">已完成</view>
  </view>

  <view wx:if="{{rows.length === 0}}" class="board-empty">
    <text class="empty-text">暂无成绩</text>
  </view>

  <view wx:for="{{rows}}" wx:key="uniqueComboId" class="board-row-wrapper">
    <!-- Combo 行 -->
    <view class="board-row" data-combo-id="{{item.uniqueComboId}}" bindtap="onComboRowTap">
      <view class="col col-rank">
        <text class="rank-text">{{item.rankText}}</text>
      </view>

      <view class="col col-combo">
        <view class="combo-members">
          <view wx:for="{{item.members}}" wx:key="user_id" wx:for-item="member" class="member-card">
            <image class="member-avatar" mode="aspectFill" src="{{member.avatarUrl}}" />
            <text class="member-name">{{member.show_name}}</text>
          </view>
        </view>
      </view>

      <view class="col col-score">
        <text class="score-text">{{item.scoreText}}</text>
      </view>

      <view class="col col-thru">
        <text>{{item.thruText}}</text>
      </view>
    </view>

    <!-- 展开的成绩详情 - 为每个成员显示一个 ExpandPlayerScore -->
    <view wx:if="{{expandedComboId === item.uniqueComboId && holeList.length > 0}}" class="expanded-scores">
      <view wx:for="{{item.members}}" wx:key="user_id" wx:for-item="member" class="member-score-section">
        <view class="member-score-header">
          <text class="member-name-in-detail">{{member.show_name}}</text>
        </view>
        <ExpandPlayerScore
          holeList="{{holeList}}"
          playerScores="{{displayScores[getPlayerIndex(member.user_id)]}}"
        />
      </view>
    </view>
  </view>
</view>
