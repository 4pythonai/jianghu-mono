<!-- 竖版展示 -->
<view class="board">
  <view class="board-header">
    <view class="col col-rank">排名</view>
    <view class="col col-player">球员</view>
    <view class="col col-score">成绩</view>
    <view class="col col-thru">已完成</view>
  </view>

  <view wx:if="{{rows.length === 0}}" class="board-empty">
    <text class="empty-text">暂无成绩</text>
  </view>

  <view
    wx:for="{{rows}}"
    wx:key="user_id"
    class="board-row-wrapper {{expandedUserId === item.user_id ? 'expanded' : ''}}"
  >
    <!-- 主行 -->
    <view
      class="board-row"
      data-user-id="{{item.user_id}}"
      data-player-index="{{item.playerIndex}}"
      bindtap="onRowTap"
    >
      <view class="col col-rank">{{item.rankText}}</view>
      <view class="col col-player">
        <view wx:if="{{item.tag_color}}" class="tag-dot" style="background-color: {{item.tag_color}}"></view>
        <image class="avatar" mode="aspectFill" src="{{item.avatarUrl}}" />
        <text class="name">{{item.show_name}}</text>
      </view>
      <view class="col col-score">{{item.scoreText}}</view>
      <view class="col col-thru">
        <text>{{item.thruText}}</text>
        <view class="expand-icon {{expandedUserId === item.user_id ? 'rotated' : ''}}">
          <text class="iconfont icon-arrow-down"></text>
        </view>
      </view>
    </view>

    <!-- 展开详情区域 -->
    <ExpandPlayerScore
      wx:if="{{expandedUserId === item.user_id && holeList.length > 0}}"
      holeList="{{holeList}}"
      playerScores="{{displayScores[item.playerIndex]}}"
    />
  </view>
</view>
