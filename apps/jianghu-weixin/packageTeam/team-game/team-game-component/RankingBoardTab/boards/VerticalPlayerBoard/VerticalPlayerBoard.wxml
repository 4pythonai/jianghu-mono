<view class="board">
  <view class="board-header">
    <text class="col-rank">排名</text>
    <text class="col-player">球员</text>
    <text class="col-score">成绩</text>
    <text class="col-thru">已完成</text>
  </view>

  <view wx:if="{{rows.length === 0}}" class="board-empty">
    <text class="empty-text">暂无成绩</text>
  </view>

  <view
    wx:for="{{rows}}"
    wx:key="user_id"
    class="board-row-wrapper {{expandedUserId === item.user_id ? 'expanded' : ''}}"
  >
    <!-- 主行 -->
    <view
      class="board-row"
      data-user-id="{{item.user_id}}"
      data-player-index="{{item.playerIndex}}"
      bindtap="onRowTap"
    >
      <text class="col-rank">{{item.rankText}}</text>
      <view class="col-player player-cell">
        <image class="avatar" mode="aspectFill" src="{{item.avatarUrl}}" />
        <text class="name">{{item.show_name}}</text>
      </view>
      <text class="col-score">{{item.scoreText}}</text>
      <text class="col-thru">{{item.thruText}}</text>
      <view class="expand-icon {{expandedUserId === item.user_id ? 'rotated' : ''}}">
        <text class="iconfont icon-arrow-down"></text>
      </view>
    </view>

    <!-- 展开详情区域 -->
    <ExpandPlayerScore
      wx:if="{{expandedUserId === item.user_id && holeList.length > 0}}"
      holeList="{{holeList}}"
      playerScores="{{displayScores[item.playerIndex]}}"
    />
  </view>
</view>
