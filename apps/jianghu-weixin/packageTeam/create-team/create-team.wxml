<wxs src="/utils/image.wxs" module="img" />
<view class="container">
  <CustomNavBar title="{{mode === 'edit' ? '编辑球队' : '创建球队'}}" showBack="{{true}}" />

  <!-- 加载中 -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

  <view class="form-container" wx:else>
    <!-- Logo 上传 -->
    <view class="form-section">
      <view class="section-title">球队 Logo</view>
      <view class="logo-upload" bindtap="chooseLogo">
        <image wx:if="{{ formData.logo }}" class="logo-preview" src="{{ img.imageUrl(formData.logo) }}" mode="aspectFill"></image>
        <view wx:else class="logo-placeholder">
          <image class="upload-icon" src="/assets/icons/icons8-add-48.png" mode="aspectFit"></image>
          <text class="upload-text">上传 Logo</text>
        </view>
      </view>
      <view class="logo-hint">建议尺寸 200x200，支持 jpg/png 格式</view>
    </view>

    <!-- 球队名称 -->
    <view class="form-section">
      <view class="section-title required">球队名称</view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入球队名称" 
          maxlength="30"
          value="{{ formData.name }}"
          bindinput="onNameInput"
        />
        <text class="char-count">{{ formData.name.length }}/30</text>
      </view>
    </view>

    <!-- 球队口号 -->
    <view class="form-section">
      <view class="section-title">球队口号 (Slogan)</view>
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入球队口号" 
          maxlength="50"
          value="{{ formData.slogan }}"
          bindinput="onSloganInput"
        />
        <text class="char-count">{{ formData.slogan.length }}/50</text>
      </view>
    </view>

    <!-- 球队描述 -->
    <view class="form-section">
      <view class="section-title">球队描述</view>
      <view class="textarea-wrapper">
        <textarea 
          class="form-textarea" 
          placeholder="请输入球队描述，介绍一下你的球队..." 
          maxlength="500"
          value="{{ formData.description }}"
          bindinput="onDescInput"
          auto-height
        ></textarea>
        <text class="char-count">{{ formData.description.length }}/500</text>
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-btn-wrapper" wx:if="{{!loading}}">
    <button class="submit-btn {{ canSubmit ? '' : 'disabled' }}" bindtap="submitForm" disabled="{{ !canSubmit || submitting }}">
      <text wx:if="{{ submitting }}">{{mode === 'edit' ? '保存中...' : '创建中...'}}</text>
      <text wx:else>{{mode === 'edit' ? '保存修改' : '创建球队'}}</text>
    </button>
  </view>
</view>

