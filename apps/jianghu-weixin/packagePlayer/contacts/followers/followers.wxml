<wxs src="/utils/image.wxs" module="image" />
<view class="container">
  <CustomNavBar title="æˆ‘çš„ç²‰ä¸" showBack="{{true}}" />

  <!-- ç”¨æˆ·åˆ—è¡¨ -->
  <view class="user-list">
    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç”¨æˆ·åˆ—è¡¨ -->
    <block wx:elif="{{users.length > 0}}">
      <view
        wx:for="{{users}}"
        wx:key="user_id"
        class="user-item"
        data-user="{{item}}"
        bindtap="goToUserProfile"
      >
        <view class="user-content">
          <view class="user-avatar-wrap">
            <PlayerAvatar
              avatar="{{image.imageUrl(item.avatar)}}"
              userId="{{item.user_id}}"
              avatarOnly="{{true}}"
              size="small"
              clickable="{{false}}"
            />
          </view>
          <view class="user-info">
            <view class="user-name-row">
              <text class="user-name">{{item.show_name || item.show_name || item.wx_name || 'çƒå‹'}}</text>
              <text class="gender-icon male" wx:if="{{item.gender === 'male'}}">â™‚</text>
              <text class="gender-icon female" wx:if="{{item.gender === 'female'}}">â™€</text>
            </view>
            <text
              class="user-handicap"
              wx:if="{{item.handicap !== null && item.handicap !== undefined && item.handicap !== 0}}"
            >æ±Ÿæ¹–å·®ç‚¹: {{item.handicap}}</text>
            <text class="user-signature" wx:if="{{item.signature}}">{{item.signature}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <view class="empty-icon">ğŸ”¥</view>
      <text class="empty-text">æš‚æ— ç²‰ä¸</text>
      <text class="empty-desc">å¤šæ‰“çƒå¤šåˆ†äº«ï¼Œç²‰ä¸è‡ªç„¶æ¥</text>
    </view>
  </view>
</view>
